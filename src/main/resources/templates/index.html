<!DOCTYPE html>
<html lang="en" xmlns:th="https://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hujjat topshirish formasi</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300..800;1,300..800&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
          rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
<header class="header">
    <div class="container">
        <div class="nav">
            <div>
                <img src="/image/urspi_new.png" alt="logo" width="70px">
                <span style="font-weight: 900">Urganch davlat pedogogika instituti</span>
            </div>
            <label for="lang"></label><select id="lang" class="form-select" style="width: 100px">
                <option value="uz" name="uz">uz</option>
<!--                <option value="ru" name="ru">ru</option>-->
                <option value="eng" name="eng">eng</option>
            </select>
        </div>


    </div>
</header>
<div th:if="${param.success}" class="container mt-5">
    <div class="alert alert-success" th:text="#{success}">

    </div>
</div>

<div class="d-flex justify-content-center text-center mt-5">
    <h3 class="header-text" th:text="#{title}" ></h3>
</div>

<div class="container form-container mt-5 mb-5">
    <div>
        <form method="post" action="/create/application" enctype="multipart/form-data" th:object="${studentDTO}">
            <div class="row mb-3">
                <div class="col-md-6">
                    <label for="firstName" class="form-label" th:text="#{firstname}"></label>
                    <input type="text" class="form-control" id="firstName" name="firstName" th:field="${studentDTO.firstName}" required>
                </div>
                <div class="col-md-6">
                    <label for="lastName" class="form-label" th:text="#{lastname}"></label>
                    <input type="text" class="form-control" id="lastName" name="lastName" th:field="${studentDTO.lastName}" required>
                </div>
            </div>

            <div class="mb-3">
                <label for="email" class="form-label" th:text="#{email}"></label>
                <input type="email" class="form-control" id="email" name="email" th:field="${studentDTO.email}" required>
                <p th:if="${#fields.hasErrors('email')}" th:errorclass="text-danger" th:errors="${studentDTO.email}"></p>
            </div>

            <div class="mb-3">
                <label for="phone" class="form-label" th:text="#{phone}"></label>
                <input type="tel" class="form-control" id="phone" name="phone" th:field="${studentDTO.phone}" required>
                <p th:if="${#fields.hasErrors('phone')}" th:errorclass="text-danger" th:errors="${studentDTO.phone}"></p>
            </div>

            <div class="row mb-3">
                <div class="col-md-6">
                    <label for="birthDate" class="form-label" th:text="#{birthDate}"></label>
                    <input type="date" class="form-control" id="birthDate" th:field="${studentDTO.birthDate}" name="birthDate" required>
                </div>
                <div class="col-md-6">
                    <label for="gender" class="form-label" th:text="#{gender}"></label>
                    <select class="form-select" id="gender" name="gender" th:field="${studentDTO.gender}" required>
                        <option value="" th:text="#{select}"></option>
                        <option value="male" th:text="#{male}"></option>
                        <option value="female" th:text="#{female}"></option>
                    </select>
                </div>
            </div>

            <div class="mb-3">
                <label for="country" class="form-label" th:text="#{country}"></label>
                <input type="text" class="form-control" name="country" id="country" th:field="${studentDTO.country}" required>
            </div>
            <div>
                <h5 th:text="#{educationInfo}"></h5>
                <div class="mb-3">
                    <label for="educationType" class="form-label" th:text="#{educationType}"></label>
                    <select class="form-select" id="educationType" name="studyType" th:field="${studentDTO.studyType}" required>
                        <option value="" th:text="#{selectEducationType}" ></option>
                        <option value="bakalavr" th:text="#{bachelor}"></option>
                        <option value="magistr" th:text="#{mastersDegree}"></option>
                    </select>
                </div>

                <div class="mb-3">
                    <label for="specialization" class="form-label" th:text="#{major}"></label>
                    <input type="text" class="form-control" id="specialization"  name="studyDirection" th:field="${studentDTO.studyDirection}" required>
                </div>

                <div class="mb-3">
                    <label for="photo" class="form-label" th:text="#{image}" required></label>
                    <input type="file" class="form-control" id="photo" name="imageLink" th:field="${studentDTO.imageLink}">
                </div>


                <div class="row mb-3">
                    <div class="col-md-6">
                        <label for="idCardSeries" class="form-label" th:text="#{idCardSeries}"></label>
                        <input type="text" class="form-control" id="idCardSeries"  name="idCardSeries" th:field="${studentDTO.idCardSeries}" required>
                    </div>
                    <div class="col-md-6">
                        <label for="passportNumber" class="form-label" th:text="#{idCardNumber}"></label>
                        <input type="text" class="form-control" id="passportNumber" name="idCardNumber" th:field="${studentDTO.idCardNumber}" required>
                    </div>
                </div>

                <div class="mb-1">
                    <label for="passportFile" class="form-label" th:text="#{idCardFile}"></label>
                    <input type="file" class="form-control" id="passportFile" name="idCardFileLink" th:field="${studentDTO.idCardFileLink}" required>
                </div>

                <h5 class="mt-3" th:text="#{agreement}"></h5>
                <p class="lead" th:text="#{policy}"></p>

                <div class="mb-3">
                    <label for="diplomaFile" class="form-label" th:text="#{diplomaOrCertificateFile}"></label>
                    <input type="file" class="form-control" id="diplomaFile" name="diplomaOrCertificateLink" th:field="${studentDTO.diplomaOrCertificateLink}" required >
                </div>

                <div class="mb-3">
                    <label for="residencePermit" class="form-label" th:text="#{uzb}"></label>
                    <input type="file" class="form-control" id="residencePermit" name="testimonyFileLink" th:field="${studentDTO.testimonyFileLink}">
                </div>

                <button type="submit" class="btn btn-primary w-100" th:text="#{sendBtn}"></button>

            </div>
        </form>
    </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>
<script>
    document.getElementById("lang").addEventListener("change", function() {
        const selectedValue = this.value;
        if (selectedValue) {
            window.location.href = `?lang=${selectedValue}`;
            fetch(`?lang=${selectedValue}`)
                .then(response => response.text())  // Assuming the response is plain text
                .then(data => {
                    console.log(data);
                    // Optionally, do something with the response, e.g., update the DOM
                })
                .catch(error => console.error('Error:', error));
        }
    });
</script>
</body>
</html>
